workflows:
  default:
    name: Build and test Android
    scripts:
      - echo "Starting Android build"
      - |
        if [ -d "/usr/lib/jvm/java-17-openjdk-amd64" ] ; then
          export JAVA_HOME="/usr/lib/jvm/java-17-openjdk-amd64"
        elif [ -d "/usr/lib/jvm/java-11-openjdk-amd64" ] ; then
          export JAVA_HOME="/usr/lib/jvm/java-11-openjdk-amd64"
        else
          echo "No valid JAVA_HOME found"
          exit 1
        fi
        ./gradlew build
    artifacts:
      - build/**/outputs/**/*.apk
